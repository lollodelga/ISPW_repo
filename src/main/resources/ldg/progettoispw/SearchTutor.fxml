<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.image.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.shape.Rectangle?>

<AnchorPane prefHeight="600.0" prefWidth="1000.0"
            xmlns="http://javafx.com/javafx/21"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="ldg.progettoispw.view.studente.BookAppointmentCtrlGrafico">

    <!-- ðŸ”¹ SFONDO -->
    <ImageView fitHeight="600.0" fitWidth="1000.0" preserveRatio="false">
        <image>
            <Image url="@../../images/wallpaper.jpeg" />
        </image>
    </ImageView>

    <!-- ðŸ”¹ BARRA SUPERIORE -->
    <AnchorPane prefHeight="63.0" prefWidth="1000.0"
                style="-fx-background-color: white;">
        <children>
            <!-- Logo -->
            <ImageView fitHeight="48.0" fitWidth="171.0"
                       layoutX="14.0" layoutY="8.0"
                       pickOnBounds="true" preserveRatio="true">
                <image>
                    <Image url="@../../images/tutorLOGO.png" />
                </image>
            </ImageView>

            <!-- Pulsante Indietro -->
            <Button fx:id="btnBack" layoutX="820.0" layoutY="12.0"
                    onAction="#backAction"
                    text="âŸµ Indietro"
                    style="-fx-background-color: transparent;
                           -fx-text-fill: #3498db;
                           -fx-font-size: 20px;
                           -fx-font-weight: bold;
                           -fx-cursor: hand;
                           -fx-border-color: transparent;">
                <tooltip>
                    <Tooltip text="Torna alla schermata precedente" />
                </tooltip>
            </Button>
        </children>
    </AnchorPane>

    <!-- ðŸ”¹ CONTENUTO PRINCIPALE -->
    <AnchorPane layoutY="63.0" prefHeight="537.0" prefWidth="1000.0">

        <!-- ðŸ”¸ PANNELLO CENTRALE SEMITRASPARENTE -->
        <Rectangle arcHeight="20.0" arcWidth="20.0"
                   fill="#3498DBAA"
                   height="470.0" width="600.0"
                   layoutX="200.0" layoutY="30.0" />

        <!-- ðŸ”¸ CONTENITORE PRINCIPALE -->
        <VBox alignment="TOP_CENTER"
              layoutX="200.0" layoutY="60.0"
              prefWidth="600.0" spacing="20.0">

            <!-- Titolo -->
            <Label text="Cerca un Tutor"
                   style="-fx-font-size: 26px; -fx-font-weight: bold; -fx-text-fill: white;" />

            <!-- Barra ricerca -->
            <HBox alignment="CENTER" spacing="10.0">
                <TextField fx:id="subjectField"
                           prefWidth="300.0"
                           promptText="Inserisci materia..."
                           style="-fx-font-size: 16px;" />
                <Button fx:id="btnSearch"
                        onAction="#searchTutor"
                        text="Cerca Tutor"
                        style="-fx-background-color: #3498DB;
                               -fx-text-fill: white;
                               -fx-font-size: 16px;
                               -fx-background-radius: 10;" />
            </HBox>

            <!-- Etichetta errore -->
            <Label fx:id="errorLabel"
                   textFill="RED" visible="false"
                   style="-fx-font-size: 16px;" />

            <!-- Risultati -->
            <ScrollPane fx:id="scrollResults"
                        prefHeight="280.0" prefWidth="500.0"
                        visible="false"
                        style="-fx-background-color: transparent;
                               -fx-background: transparent;">
                <content>
                    <VBox fx:id="resultsContainer"
                          alignment="TOP_CENTER"
                          spacing="10.0"
                          style="-fx-padding: 10;" />
                </content>
            </ScrollPane>
        </VBox>

        <!-- ðŸ”¸ PANNELLO DI PRENOTAZIONE (visibile dopo la selezione) -->
        <AnchorPane fx:id="appointmentPane"
                    visible="false"
                    layoutX="350.0" layoutY="190.0"
                    prefWidth="300.0" prefHeight="200.0"
                    style="-fx-background-color: #ffffffee;
                           -fx-border-radius: 10;
                           -fx-background-radius: 10;
                           -fx-border-color: #3498DB;
                           -fx-border-width: 2;
                           -fx-effect: dropshadow(gaussian, gray, 10, 0, 0, 3);">
            <children>
                <VBox alignment="CENTER" spacing="12.0"
                      layoutX="25.0" layoutY="25.0">
                    <Label text="Prenota Appuntamento"
                           style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #3498DB;" />
                    <DatePicker fx:id="datePicker" prefWidth="200.0" />
                    <ComboBox fx:id="hourCombo" prefWidth="200.0" promptText="Seleziona ora" />
                    <HBox alignment="CENTER" spacing="10.0">
                        <Button fx:id="btnBook" text="Conferma"
                                onAction="#bookAppointment"
                                style="-fx-background-color: #2ecc71;
                                       -fx-text-fill: white;
                                       -fx-font-size: 14px;
                                       -fx-background-radius: 10;" />
                        <Button fx:id="btnCancel" text="Annulla"
                                onAction="#cancelSelection"
                                style="-fx-background-color: #e74c3c;
                                       -fx-text-fill: white;
                                       -fx-font-size: 14px;
                                       -fx-background-radius: 10;" />
                    </HBox>

                    <Label fx:id="statusLabel"
                           textFill="RED"
                           visible="false"
                           style="-fx-font-size: 14px;" />
                </VBox>
            </children>
        </AnchorPane>

    </AnchorPane>
</AnchorPane>
